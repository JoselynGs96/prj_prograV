<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <h:head>
    <title>Panel de Mantenimiento</title>
    <meta charset="utf-8"/>
    <!-- Bootstrap core CSS -->
    <link href="RecursoMante/css/bootstrap.css" rel="stylesheet"/>
    <!--external css-->
    <link href="RecursoMante/font-awesome/css/font-awesome.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="RecursoMante/css/zabuto_calendar.css"/>
    <link rel="stylesheet" type="text/css" href="RecursoMante/js/gritter/css/jquery.gritter.css" />
    <link rel="stylesheet" type="text/css" href="RecursoMante/lineicons/style.css"/>    
    <link href="RecursoMante/css/datepicker.css" rel="stylesheet" type="text/css"/>
    <!-- Custom styles for this template -->
    <link href="RecursoMante/css/style.css" rel="stylesheet"/>
    <link href="RecursoMante/css/style-responsive.css" rel="stylesheet"/>

    <script src="RecursoMante/js/chart-master/Chart.js"></script>
    
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <script>
          function abrirModal(){
              $('#modalVer').modal('show');
          }
           function abrirModalDenegar(){
              $('#modalDenegar').modal('show');
          }
          
           
          
    </script>
    <script>
           PrimeFaces.locales['es'] = {
                closeText: 'Cerrar',
                prevText: 'Anterior',
                nextText: 'Siguiente',
                monthNames: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'],
                monthNamesShort: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun', 'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'],
                dayNames: ['Domingo', 'Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado'],
                dayNamesShort: ['Dom', 'Lun', 'Mar', 'Mie', 'Jue', 'Vie', 'Sab'],
                dayNamesMin: ['D', 'L', 'M', 'M', 'J', 'V', 'S'],
                weekHeader: 'Semana',
                firstDay: 1,
                isRTL: false,
                showMonthAfterYear: false,
                yearSuffix: '',
                timeOnlyTitle: 'Sólo hora',
                timeText: 'Tiempo',
                hourText: 'Hora',
                minuteText: 'Minuto',
                secondText: 'Segundo',
                currentText: 'Fecha actual',
                ampm: false,
                month: 'Mes',
                week: 'Semana',
                day: 'Día',
                allDayText: 'Todo el día'
            };
        </script>         
    </h:head>
    <h:body> 
  <section id="container">
    
      <h:form id="myForm" prependId="false">
      <!-- **********************************************************************************************************************************************************
      TOP BAR CONTENT & NOTIFICATIONS
      *********************************************************************************************************************************************************** -->
      <!--header start-->
      <header class="header black-bg ">
            <div class="sidebar-toggle-box">
                <div class="fa fa-bars tooltips" style="color:white"  data-placement="right" data-original-title="Menú"></div>
            </div>
            <div class="dropdown pull-right logout" style="color: white; margin-top: 20px; " >
                <a class="dropdown-toggle top-menu" data-toggle="dropdown" href="#"><h:outputText style="color: white" value="#{mantenimientoBean.usuario.nombreCompleto}"></h:outputText>
                <span class="caret"></span></a>
            	<ul class="nav dropdown-menu">
                    <li><h:commandLink actionListener="#{indexBean.cerrarSesion()}" value="Cerrar Sesión"></h:commandLink></li>
            	</ul>
            </div>
      </header>
      <!--header end-->
      
      <!-- **********************************************************************************************************************************************************
      MAIN SIDEBAR MENU
      *********************************************************************************************************************************************************** -->
      <!--sidebar start-->
      <aside>
          <div id="sidebar"  class="nav-collapse " style="background:#e7e8e7;">
              <!-- sidebar menu start-->
              <ul class="sidebar-menu">
              
                  <p class="centered"><a href="faces/Mantenimiento.xhtml"><img width="100px"  src="Recursos/images/logo2.PNG" alt=""/></a></p>
                  <h5 class="centered" style="color:black">Panel de Administración</h5>
              	  	
                  <li class="mt">
                      <a class="active" href="faces/Mantenimiento.xhtml">
                          <i class="fa fa-dashboard"></i>
                          <span>Inicio</span>
                      </a>
                  </li>

                  <li class="sub-menu" >
                      <a href="faces/CatalogoPrograma.xhtml" >
                          <i class="fa fa-desktop"></i>
                          <span>Catálogo Programas</span>
                      </a>
                  </li>

                  <li class="sub-menu">
                      <a href="faces/CursoPorPrograma.xhtml" >
                          <i class="fa fa-cogs"></i>
                          <span>Cursos por programa</span>
                      </a>
                  </li>
                  <li class="sub-menu">
                      <a href="faces/RecursoInfraestructura.xhtml" >
                          <i class="fa fa-book"></i>
                          <span>Recursos de Infraestructura</span>
                      </a>
                  </li>
                  <li class="sub-menu">
                      <a href="faces/UsuarioPorPrograma.xhtml">
                          <i class="fa fa-tasks"></i>
                          <span>Usuarios por Programa</span>
                      </a>
                  </li>
                  <li class="sub-menu">
                      <a href="faces/JornadaAcademica.xhtml">
                          <i class="fa fa-th"></i>
                          <span>Jornadas Académicas</span>
                      </a>
                  </li>
                  <li class="sub-menu">
                      <a href="reporteOutlook.xhtml">
                          <i class=" fa fa-bar-chart-o"></i>
                          <span>Reportes Resumen</span>
                      </a>
                  </li>
                  <li class="sub-menu">
                      <a href="ReportePorFuncionario.xlsx" target="_blank">
                          <i class=" fa fa-bar-chart-o"></i>
                          <span>Reportes por Funci.</span>
                      </a>
                  </li>

              </ul>
              <!-- sidebar menu end-->
          </div>
      </aside>
      <!--sidebar end-->
      
      <!-- **********************************************************************************************************************************************************
      MAIN CONTENT
      *********************************************************************************************************************************************************** -->
      <p:sidebar widgetVar="sidebar2" position="right" baseZIndex="10000" style="width: 300px" >
        <p:scrollPanel mode="native" style="width:100%;height:100%; border:0px; margin-bottom: 50px" > 
        <h1 style="font-weight:normal">Ayuda</h1>          
        <br></br>
        <strong>¿Desea aceptar una jornada? </strong>
        <br></br>
        Clic sobre el <br></br> botón &#8594;
        <img src="RecursoMante/img/Aceptar.jpeg" width="60px" height="30px" alt=""/>
        <br></br>
        <br></br>
        <strong>¿Desea denegar una jornada? </strong>
        <br></br>
        Clic sobre el botón &#8594;
        <img src="RecursoMante/img/Denegar.jpeg" width="60px" height="30px" alt=""/>
        <br></br>
        Luego, indique el motivo por el que se deniega la solicitud y clic en el botón "Confirmar"
        <br></br>
        <br></br>
        <strong> ¿Desea ver más detalles de un registro? </strong>
        <br></br>
        Clic sobre el botón &#8594;
        <img src="RecursoMante/img/btnVer.PNG" width="35px" height="30px" alt=""/>
        <br></br>
        <br></br>
        <strong>¿Desea buscar un registro en específico? </strong>
        <br></br>
        Llene el campo "Buscar..." con el dato de referencia y luego, clic sobre el <br></br>
         el botón  &#8594;
         <img src="RecursoMante/img/btnBuscar.PNG"  width="35px" height="30px" style="border: 1px solid darkgrey"  alt=""/>
        <br></br>
        <br></br>
        <div style="margin-bottom: 30px; height: 50px"></div>
        </p:scrollPanel>
     </p:sidebar>
      
      <div id="modalDenegar" class="modal fade" role="dialog">
          <div class="modal-dialog" style="width: 500px">
           <div class="modal-content">
               <div class="modal-header" style="background: #0d2d6d;">
                   <button type="button" class="close" style="color: white" data-dismiss="modal">&times;</button>
               <h4 class="modal-title">Denegar Solicitud</h4>
              </div>
             <div class="modal-body">
                 <strong>Motivo por el que se le deniega la solicitud a: <h:outputText value="#{mantenimientoBean.denegado.nombreCompleto}"></h:outputText></strong>
                 <center>
                 <br></br>
                 <h:inputTextarea class="form-control" style="width: 90% " value="#{mantenimientoBean.msjRechazo}" >
                     
                 </h:inputTextarea>
                 </center>
             </div>
               <div class="modal-footer" style="border-top-color:#e7e8e7;">
                 <button type="button"   class="btn c" style="background-color: #0d2d6d; color: white" data-dismiss="modal">Cerrar</button>
                 <h:commandButton class="btn btn-success" value="Confirmar" actionListener="#{mantenimientoBean.botonDenegar()}"></h:commandButton>
               </div>
           </div>

         </div>
     </div>
      
      <div id="modalVer" class="modal fade" role="dialog">
          <div class="modal-dialog" style="width: 500px">
           <div class="modal-content">
               <div class="modal-header" style="background: #0d2d6d;">
                   <button type="button" class="close" style="color: white" data-dismiss="modal">&times;</button>
               <h4 class="modal-title">Detalles de la Solicitud</h4>
             </div>
             <div class="modal-body">
                     <table width="100%">
                        <tr bgcolor="" style="background: #e7e8e7;">
                            <th colspan="2" style="font-weight: bold; margin-top: 3px; text-align: center; color:black">Información General</th>
                        </tr>
                        <tr>
                            <td>
                                <p:outputLabel style="font-weight: bold; margin-top: 3px; width:200px; color: #222533; " value="Identificación de la solicitud:"></p:outputLabel>
                            </td>
                            <td>
                                <p:outputLabel style=" margin-top: 3px; width:200px " value="#{mantenimientoBean.id}"></p:outputLabel>
                            </td>
                        </tr>
                        <tr>
                            <td>
                               <p:outputLabel style="font-weight: bold; margin-top: 3px; width:200px; color: #222533;" value="Nombre del Funcionario"></p:outputLabel>
                            </td>
                            <td>
                                <p:outputLabel style=" margin-top: 3px; width:200px " value="#{mantenimientoBean.nombrefuncionario}"></p:outputLabel>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                 <p:outputLabel style="font-weight: bold; margin-top: 3px; width:200px; color: #222533;" value="Tipo Solicitud:"></p:outputLabel>
                            </td>
                            <td>
                                <p:outputLabel style=" margin-top: 3px; width:200px " value="#{mantenimientoBean.tipo}"></p:outputLabel>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                 <p:outputLabel style="font-weight: bold; margin-top: 3px; width:200px; color: #222533;" value="Estado:"></p:outputLabel>
                            </td>
                            <td>
                                <p:outputLabel style=" margin-top: 3px; width:200px " value="#{mantenimientoBean.estado}"></p:outputLabel>
                            </td>
                        </tr>         
                       
                        <tr bgcolor="#e7e8e7;" style="background: #e7e8e7;">
                            <th colspan="2" style="font-weight: bold; margin-top: 3px; text-align: center; color:black" >Agendas Solicitadas</th>
                        </tr>
                        <tr>
                            <td colspan="2" style="padding: 5px">
                                <h:inputTextarea style=" margin-top: 3px; width: 450px; border: 0px; " value="#{mantenimientoBean.agendas}"></h:inputTextarea>
                            </td>
                        </tr>
                        
                    </table>
             </div>
               <div class="modal-footer" style="border-top-color:#e7e8e7; ">
                 <button type="button"   class="btn c" style="background-color: #0d2d6d; color: white" data-dismiss="modal">Cerrar</button>
             </div>
           </div>

         </div>
     </div>
      
      <!--main content start-->
      <section id="main-content" style="min-height: 500px">
          <section class="wrapper">
              <h3><i class="fa fa-angle-right"></i> Solicitudes de Eventos</h3>
              <div class="row mtbox" style="margin-top: 0px">
                   
                    <div class="col-lg-12 main-chart">
                        <div>
                            <p:inputText placeholder="Buscar..."   class="form-control" value="#{mantenimientoBean.buscarFiltro}"   style="width: 200px; float: left;"></p:inputText>
                            <h:commandButton actionListener="#{mantenimientoBean.buscar()}" id="bus" class="btn btn-default"  image="RecursoMante/img/buscar.png"  style="height:34px; margin-left: 5px; margin-right: 10px; display: inline-block;">
                               
                            </h:commandButton>
                        </div>
                        <br></br>
                        <p:outputLabel escape="false" style="width: 100%" id="msjf" value="#{mantenimientoBean.mensajeFiltro}" ></p:outputLabel>
                        <h:dataTable  id="datausu" class="table table-striped table-advance table-hover" value="#{mantenimientoBean.listaEnca}" var="enca" >
                            <h:column>
                                <f:facet name="header">
                                    <h:outputText value="Identificador"/>
                                </f:facet>
                                <h:outputText value="#{enca.id_Encabezado}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:outputText value="Fecha de Solicitud"/>
                                </f:facet>
                                <h:outputText value="#{enca.fechaInicio}" />
                            </h:column>
                             <h:column>
                                <f:facet name="header">
                                    <h:outputText value="Fecha de Respuesta"/>
                                </f:facet>
                                 <h:outputText value="#{enca.fechaFinal}" />
                            </h:column>
                             <h:column>
                                <f:facet name="header">
                                    <h:outputText value="Funcionario"/>
                                </f:facet>
                                 <h:outputText value="#{enca.funcionario.nombreCompleto}" />
                            </h:column>
                             <h:column>
                                <f:facet name="header">
                                    <h:outputText value="Tipo de Solicitud"/>
                                </f:facet>
                                 <h:outputText value="#{enca.tipo_solicitud.nombre}" />
                            </h:column>
                             <h:column>
                                <f:facet name="header">
                                    <h:outputText value="Estado"/>
                                </f:facet>
                                 <h:outputText value="#{enca.estado.nombre}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:outputText />
                                </f:facet>
                                <center>
                                    <h:commandButton   alt="Ver más" title="Ver más" actionListener="#{mantenimientoBean.verMas(enca.id_Encabezado)}"  
                                    class="btn btn-default btn-xs" style="width: 40px; height: 30px; margin-left: 3px" image="RecursoMante/img/ver.png"></h:commandButton>
                                </center>
                            </h:column>
                              <h:column>
                                <f:facet name="header">
                                    <h:outputText value="Estado: Pendiente"/>
                                </f:facet>
                                <div id="btnEstAc">
                                    <h:commandButton  disabled="#{enca.estado.id != 4}"  actionListener="#{mantenimientoBean.recibeDenegado(enca.id_Encabezado)}" class="btn btn-danger" value="Denegar"></h:commandButton>
                                    <h:commandButton  disabled="#{enca.estado.id != 4}" actionListener="#{mantenimientoBean.botonAceptar(enca.id_Encabezado)}" style="margin-left: 5px" class="btn btn-success" value="Aceptar"></h:commandButton>
                                   
                                </div>
                            </h:column>
                        </h:dataTable> 
                    </div>
              </div>
          </section>
          
      </section>
                        
     
      <!--main content end-->
      <!--footer start-->
      <footer class="site-footer">
          <div class="text-center">
              &copy;2018 UTN Todos los Derechos Reservados.
              <a href="Mantenimiento.xhtml#" class="go-top">
                  <i class="fa fa-angle-up"></i>
              </a>
          </div>
      </footer>
      <!--footer end-->
      </h:form>
  </section>
    
    <h:outputScript library="RecursoMante/js" name="jquery.js" target="head"></h:outputScript>
    <h:outputScript library="RecursoMante/js" name="jquery-1.8.3.min.js" target="head"></h:outputScript>
    <script class="include" type="text/javascript" src="RecursoMante/js/jquery.dcjqaccordion.2.7.js"></script>
    <script src="RecursoMante/js/jquery.scrollTo.min.js"></script>
    <script src="RecursoMante/js/jquery.nicescroll.js" type="text/javascript"></script>
    <script src="RecursoMante/js/jquery.sparkline.js"></script>
    <script src="RecursoMante/js/bootstrap.min.js"></script>
    
    <!--common script for all pages-->
    <script src="RecursoMante/js/common-scripts.js"></script>
    <script type="text/javascript" src="RecursoMante/js/gritter/js/jquery.gritter.js"></script>
    <script type="text/javascript" src="RecursoMante/js/gritter-conf.js"></script>

    <!--script for this page-->
    <script src="RecursoMante/js/sparkline-chart.js"></script>    
    <script src="RecursoMante/js/zabuto_calendar.js"></script>
    </h:body>
</html>

