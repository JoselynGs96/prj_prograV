<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <h:head>
        <meta charset="utf-8"/>
        <title>Consulta y Cancelación</title>
        <!-- Mobile Specific Meta -->
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
        <!-- Custom Fonts -->       
        <link href="../Recursos/custom-font/fonts.css" rel="stylesheet" type="text/css"/>
        <!-- Bootstrap -->       
        <link href="../Recursos/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
        <!-- Font Awesome -->
        <link href="../Recursos/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
        <!-- Bootsnav -->      
        <link href="../Recursos/css/bootsnav.css" rel="stylesheet" type="text/css"/>
        <!-- Fancybox -->
        <link href="../Recursos/css/jquery.fancybox.css" rel="stylesheet" type="text/css"/>      
        <!-- Custom stylesheet -->      
        <link href="../Recursos/css/custom.css" rel="stylesheet" type="text/css"/>
        <!--[if lt IE 9]>
                <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        
    </h:head>
    <h:body>

        <h:form prependId="false">
            <p:sidebar widgetVar="sidebar2" position="right" baseZIndex="10000" style="width: 300px" >
                <p:scrollPanel mode="native" style="width:100%;height:100%; border:0px; margin-bottom: 50px" > 
                    <h1 style="font-weight:normal">Ayuda</h1>          
                    <br></br>
                    <strong>¿Desea Cancelar una Solicitud? </strong>
                    <br></br>
                    Escoja la solicitud que desea cancelar 
                     y luego Clic sobre el  <br></br> botón &#8594;
                     <img src="Recursos/images//CancelarActivo.JPG" style="width:80px ;height:60px" alt=""/>
                    <br></br>
                    <br></br>
                    <strong>¿No puede Cancelar una Solicitud? </strong>
                    <br></br>   
                    Si el boton esta desactivado la solicitud ya no esta activa. El boton esta desactivado cuando aparece asi
                    <br></br> botón &#8594;
                    <img src="Recursos/images//cancelarDesactivo.JPG" style="width:80px ;height:60px" alt=""/>
                    <br></br>
                    <br></br>

                    <div style="margin-bottom: 30px; height: 50px"></div>
                </p:scrollPanel>
            </p:sidebar>
          
            <header>
                <div class="top_nav">
                    <div class="container">
                        <ul class="list-inline info">
                            <li><a href="#"><span class="fa fa-phone"></span> (506) 2435-5000</a></li>
                            <li><a href="#"><span class="fa fa-envelope"></span> infosedecentral@utn.ac.cr</a></li>
                            <li><a href="#"><span class="fa fa-clock-o"></span> Lunes - Sabado 9:00am - 5:00pm</a></li>
                        </ul>	
                    </div>
                </div>
                <nav class="navbar bootsnav" style="background-color:#0d2d6d; ">
                    <div class="container">
                        <!-- Header Navigation -->
                        <div class="navbar-header">
                            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-menu">
                                <i class="fa fa-bars"></i>
                            </button>
                            <a  href=""><img class="logo" src="../Recursos/images/logo.PNG" alt=""/></a>
                        </div>
                        <!-- Navigation -->
                        <div class="collapse navbar-collapse" id="navbar-menu">
                            <ul class="nav navbar-nav menu">
                                <li><a href="faces/Prestamo.xhtml" >Proceso de Préstamo </a></li> 
                                <li><a href="faces/ConsultaCancelacion.xhtml" >Consulta y Cancelación </a></li> 

                                <li><h:commandLink actionListener="#{indexBean.cerrarSesion()}" value="Cerrar Sesión"></h:commandLink></li> 
                                <li><a href="faces/index.xhtml" ><h:outputLabel value="#{indexBean.nombre}"></h:outputLabel></a></li> 
                            </ul>
                        </div>
                    </div>    
                </nav>
            </header>
            
            
            <secion class="contact_form container" >
            <div style="background:white" class="col-lg-offset-3 col-lg-6">      

                <center>
                    <div>
                          <p class="h1">Consulta y Cancelación de Solicitudes</p>
                          <a onclick="PF('sidebar2').show()" href="#" title="Ayuda" style="margin-top: 0px; margin-bottom: 5px;" ><img align="right" style="width:20px; height:20px;margin-top: 0px; margin-bottom: 5px;" src="RecursoMante/img/ayuda.png" alt=""/></a>
                    </div>
                    <h:dataTable  id="datausu" class="table table-striped table-advance table-hover" value="#{consultaCancelacionBean.listaSolicitud}" var="list" >
                            <h:column>
                                <f:facet name="header">
                                    <h:outputText value="Id Solicitud"/>
                                </f:facet>
                                <h:outputText value="#{list.id_Encabezado}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:outputText value="Fecha de la Solicitud"/>
                                </f:facet>
                                <h:outputText value="#{list.fechaInicio}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:outputText value="Fecha de Respuesta"/>
                                </f:facet>
                                <h:outputText value="#{list.fechaFinal == null?'Solicitud aún no procesada':list.fechaFinal}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:outputText value="Coordinador a Cargo"/>
                                </f:facet>
                                <h:outputText value="#{list.coordinador.nombreCompleto == ''? '':list.coordinador.nombreCompleto}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:outputText value="Estado Solicitud"/>
                                </f:facet>
                                <h:outputText value="#{list.estado.nombre}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:outputText value=""/>
                                </f:facet>
                                <div id="btnEstAc">
                                    <h:commandButton disabled="#{list.log != 1}"  actionListener="#{consultaCancelacionBean.cancelar(list.id_Encabezado)}" class="btn btn-danger" value="Cancelar"></h:commandButton>
                                       
                                   
                                </div>
                            </h:column>
                        </h:dataTable> 
                    <br></br>
                    <br></br> 
                    <br></br>
                    <h:outputLabel value="#{consultaCancelacionBean.mensajeBueno}" escape="false"></h:outputLabel>
                    <br></br> 
                    <br></br>
                </center>

            </div>
            </secion>
          
        <!-- Footer -->
        <footer>
            <!-- Footer bottom -->
            <div class="footer_bottom text-center">
                <p class="wow fadeInRight">                   
                    <li> &copy;2019 UTN Todos los Derechos Reservados.</li>
                </p>
            </div>
            <!-- Footer bottom end -->
        </footer>
        <!-- Footer end -->
            
        </h:form>

    </h:body>
</html>
